#!/bin/sh

school=$(echo "$1" | tr '[A-Z]' '[a-z'])
name="$2"

# LDAP
ldap() {
  ldap_name="$1"
  hostname="$2"
  mkdir -p ~/log
  ldapsearch -h "$hostname" -s sub -b "o=$ldap_name,c=US" -x -t -LLL "(&(displayName=*$name*))" 2> ~/log/ldap-error.log
}

case "$school" in
  d|dartmouth) ldap Dartmouth\ College ldap.dartmouth.edu ;;
  c|cornell) ldap Cornell\ University directory.cornell.edu ;;
  p|princeton) ldap Princeton\ University ldap.princeton.edu ;;
  *) echo "usage: $0 <school> <person's name>"
esac
